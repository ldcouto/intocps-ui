<form *ngIf="config" (ngSubmit)="onSubmit()" #configForm="ngForm">
    <h4>FMUs <button (click)="addFmu()" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-plus"></span></button></h4>

    <div class="row">
        <div class="col-md-3"><label>Keys</label></div>
        <div class="col-md-9"><label>Paths</label></div>
    </div>

    <div class="row" *ngFor="let fmu of config.fmus; let i=index">
        <div class="col-md-3 form-group"><input name="key{{i}}" [(ngModel)]="fmu.name" class="form-control"></div>
        <div class="col-md-9 form-group"><input name="path{{i}}" [(ngModel)]="fmu.path" class="form-control"></div>
    </div>

    <hr>

    <h4>FMU instances</h4>

    <div class="row">
        <div class="col-md-6"><label>FMU</label></div>
        <div class="col-md-6"><label>Instance</label></div>
    </div>

    <div *ngFor="let instance of config.fmuInstances" class="row">
        <div class="col-md-6">{{instance.fmu.name}}</div>
        <div class="col-md-6">{{instance.name}}</div>
    </div>

    <hr>

    <h4>Connections</h4>

    <div class="row">
        <div class="col-md-3">
            <h5><label>Output instance</label></h5>

            <ul class="list-group">
                <a *ngFor="let instance of config.fmuInstances"
                   (click)="selectOutputInstance(instance)"
                   [class.active]="selectedOutputInstance === instance"
                   class="list-group-item">{{instance.name}}</a>
            </ul>
        </div>

        <div class="col-md-3">
            <h5><label>Output variable</label></h5>

            <ul *ngIf="selectedOutputInstance" class="list-group">
                <a *ngFor="let output of getOutputs()"
                   (click)="selectOutput(output)"
                   [class.active]="selectedOutput === output"
                   class="list-group-item">{{output.name}}</a>
            </ul>
        </div>

        <div class="col-md-3">
            <h5><label>Input instance</label></h5>

            <ul *ngIf="selectedOutput" class="list-group">
                <a *ngFor="let instance of config.fmuInstances"
                   (click)="selectInputInstance(instance)"
                   [class.active]="selectedInputInstance === instance"
                   class="list-group-item">{{instance.name}}</a>
            </ul>
        </div>

        <div class="col-md-3">
            <h5><label>Input variable</label></h5>

            <ul *ngIf="selectedInputInstance" class="list-group">
                <li *ngFor="let input of getInputs()" class="list-group-item">
                    <input type="checkbox"
                           [checked]="isInputConnected(input)"
                           (change)="onConnectionChange($event.target.checked, input)">
                    {{input.name}}</li>
            </ul>
        </div>
    </div>

    <hr>

    <h4>Parameters</h4>

    <hr>

    <button type="submit" class="btn btn-default" [disabled]="!configForm.form.valid">
        <span class="glyphicon glyphicon-floppy-saved" aria-hidden="true"></span> Save
    </button>
</form>